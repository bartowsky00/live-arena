---
import Layout from '../../layouts/Layout.astro';
import EventCard from '../../components/EventCard.astro';
import { getUpcomingByVenue, getPastByVenue } from '../../lib/events';

const upcomingEvents = await getUpcomingByVenue('palaforum');
const pastEvents = await getPastByVenue('palaforum');
---

<Layout title="Eventi Palaforum" description="Tutti gli eventi e spettacoli al Palaforum Giuseppe Bellavia di Agrigento. Scopri il calendario e acquista i biglietti.">
  <!-- Hero Section -->
  <section class="relative pt-32 pb-20 md:pt-40 md:pb-28 overflow-hidden">
    <!-- Background -->
    <div class="absolute inset-0">
      <div class="absolute inset-0 bg-gradient-to-b from-violet-600/10 via-arena-black to-arena-black"></div>
      <div class="absolute top-0 right-0 w-[600px] h-[400px] bg-violet-600/10 blur-[150px] rounded-full"></div>
    </div>

    <div class="max-w-7xl mx-auto px-6 relative">
      <!-- Back Link -->
      <a href="/palaforum" class="inline-flex items-center gap-2 text-white/60 hover:text-white mb-8 transition-colors">
        <svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24">
          <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M15 19l-7-7 7-7"></path>
        </svg>
        <span>Palaforum</span>
      </a>

      <div class="text-center">
        <span class="text-violet-400 text-sm tracking-[0.3em] uppercase mb-4 block animate-fade-in">Palaforum</span>
        <h1 class="font-display text-5xl md:text-7xl lg:text-8xl tracking-wider text-white mb-6 animate-fade-up" style="animation-delay: 0.1s;">
          EVENTI
        </h1>
        <p class="text-white/60 text-lg max-w-2xl mx-auto animate-fade-up" style="animation-delay: 0.2s;">
          Scopri tutti gli spettacoli e gli eventi al Palaforum Giuseppe Bellavia di Agrigento
        </p>
      </div>
    </div>
  </section>

  <!-- Events Tabs Section -->
  <section class="py-16 md:py-24 bg-arena-black">
    <div class="max-w-7xl mx-auto px-6">
      <!-- Tabs -->
      <div class="flex justify-center mb-12">
        <div class="inline-flex bg-arena-gray p-1">
          <button
            id="tab-upcoming"
            class="px-8 py-3 text-sm uppercase tracking-wider font-medium transition-colors bg-violet-600 text-white"
          >
            Prossimi Eventi
          </button>
          <button
            id="tab-past"
            class="px-8 py-3 text-sm uppercase tracking-wider font-medium transition-colors text-white/50 hover:text-white"
          >
            Eventi Passati
          </button>
        </div>
      </div>

      <!-- Upcoming Events -->
      <div id="upcoming-events">
        {upcomingEvents.length > 0 ? (
          <div class="grid md:grid-cols-2 lg:grid-cols-3 gap-8">
            {upcomingEvents.map((event) => (
              <EventCard
                id={event.slug}
                artist={event.artist}
                tour={event.tour}
                dateDisplay={event.dateDisplay}
                image={event.image}
                status={event.status as 'on-sale' | 'coming-soon' | 'sold-out' | 'past'}
                venue={event.venue}
                showVenueBadge={false}
              />
            ))}
          </div>
        ) : (
          <div class="text-center py-16">
            <div class="w-20 h-20 bg-arena-gray rounded-full flex items-center justify-center mx-auto mb-6">
              <svg class="w-10 h-10 text-white/30" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M8 7V3m8 4V3m-9 8h10M5 21h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v12a2 2 0 002 2z"></path>
              </svg>
            </div>
            <p class="text-white/50 text-lg">Nessun evento in programma al momento.</p>
            <p class="text-white/30 mt-2">Torna presto per scoprire i prossimi spettacoli!</p>
          </div>
        )}
      </div>

      <!-- Past Events -->
      <div id="past-events" class="hidden">
        {pastEvents.length > 0 ? (
          <div class="grid md:grid-cols-2 lg:grid-cols-3 gap-8">
            {pastEvents.map((event) => (
              <EventCard
                id={event.slug}
                artist={event.artist}
                tour={event.tour}
                dateDisplay={event.dateDisplay}
                image={event.image}
                status="past"
                venue={event.venue}
                showVenueBadge={false}
              />
            ))}
          </div>
        ) : (
          <div class="text-center py-16">
            <p class="text-white/50 text-lg">Nessun evento passato.</p>
          </div>
        )}
      </div>
    </div>
  </section>

  <!-- Info Section -->
  <section class="py-16 md:py-24 bg-arena-dark">
    <div class="max-w-7xl mx-auto px-6">
      <div class="grid md:grid-cols-3 gap-8">
        <!-- Tickets -->
        <div class="p-8 bg-arena-gray border border-white/5 reveal">
          <div class="w-14 h-14 bg-violet-600/10 flex items-center justify-center mb-6">
            <svg class="w-7 h-7 text-violet-400" fill="none" stroke="currentColor" viewBox="0 0 24 24">
              <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M15 5v2m0 4v2m0 4v2M5 5a2 2 0 00-2 2v3a2 2 0 110 4v3a2 2 0 002 2h14a2 2 0 002-2v-3a2 2 0 110-4V7a2 2 0 00-2-2H5z"></path>
            </svg>
          </div>
          <h3 class="font-display text-2xl tracking-wider text-white mb-4">BIGLIETTI</h3>
          <p class="text-white/50 mb-4">I biglietti sono disponibili online. Seleziona un evento per acquistare.</p>
        </div>

        <!-- Location -->
        <div class="p-8 bg-arena-gray border border-white/5 reveal reveal-delay-1">
          <div class="w-14 h-14 bg-violet-600/10 flex items-center justify-center mb-6">
            <svg class="w-7 h-7 text-violet-400" fill="none" stroke="currentColor" viewBox="0 0 24 24">
              <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M17.657 16.657L13.414 20.9a1.998 1.998 0 01-2.827 0l-4.244-4.243a8 8 0 1111.314 0z"></path>
              <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M15 11a3 3 0 11-6 0 3 3 0 016 0z"></path>
            </svg>
          </div>
          <h3 class="font-display text-2xl tracking-wider text-white mb-4">LOCATION</h3>
          <p class="text-white/50 mb-4">Via Esa Chimento, 92100 Agrigento AG</p>
          <a href="/palaforum#map" class="text-violet-400 hover:text-violet-300 text-sm">Come arrivare →</a>
        </div>

        <!-- Info -->
        <div class="p-8 bg-arena-gray border border-white/5 reveal reveal-delay-2">
          <div class="w-14 h-14 bg-violet-600/10 flex items-center justify-center mb-6">
            <svg class="w-7 h-7 text-violet-400" fill="none" stroke="currentColor" viewBox="0 0 24 24">
              <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M13 16h-1v-4h-1m1-4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"></path>
            </svg>
          </div>
          <h3 class="font-display text-2xl tracking-wider text-white mb-4">INFO</h3>
          <p class="text-white/50 mb-4">Per informazioni sugli eventi contattaci o seguici sui social.</p>
          <a href="/contatti" class="text-violet-400 hover:text-violet-300 text-sm">Contattaci →</a>
        </div>
      </div>
    </div>
  </section>
</Layout>

<script>
  const tabUpcoming = document.getElementById('tab-upcoming');
  const tabPast = document.getElementById('tab-past');
  const upcomingEvents = document.getElementById('upcoming-events');
  const pastEvents = document.getElementById('past-events');

  tabUpcoming?.addEventListener('click', () => {
    tabUpcoming.classList.add('bg-violet-600', 'text-white');
    tabUpcoming.classList.remove('text-white/50');
    tabPast?.classList.remove('bg-violet-600', 'text-white');
    tabPast?.classList.add('text-white/50');
    upcomingEvents?.classList.remove('hidden');
    pastEvents?.classList.add('hidden');
  });

  tabPast?.addEventListener('click', () => {
    tabPast.classList.add('bg-violet-600', 'text-white');
    tabPast.classList.remove('text-white/50');
    tabUpcoming?.classList.remove('bg-violet-600', 'text-white');
    tabUpcoming?.classList.add('text-white/50');
    pastEvents?.classList.remove('hidden');
    upcomingEvents?.classList.add('hidden');
  });
</script>

<style>
  @keyframes fadeUp {
    from {
      opacity: 0;
      transform: translateY(40px);
    }
    to {
      opacity: 1;
      transform: translateY(0);
    }
  }

  .animate-fade-up {
    animation: fadeUp 0.8s ease-out forwards;
    opacity: 0;
  }

  .animate-fade-in {
    animation: fadeIn 0.6s ease-out forwards;
  }

  @keyframes fadeIn {
    from { opacity: 0; }
    to { opacity: 1; }
  }
</style>
